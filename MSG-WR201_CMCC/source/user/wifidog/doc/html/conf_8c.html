<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>WifiDog: conf.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>conf.c File Reference</h1>Config file parsing. <a href="#_details">More...</a>
<p>

<p>
<a href="conf_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="369266c24eacffb87046522897a570d5"></a><!-- doxytag: member="conf.c::_GNU_SOURCE" ref="369266c24eacffb87046522897a570d5" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>_GNU_SOURCE</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="conf_8c.html#9934c7def687e5ed242049cb2a46eb73">TO_NEXT_WORD</a>(s, e)</td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><b>OpCodes</b> { <br>
&nbsp;&nbsp;<b>oBadOption</b>, 
<b>oDaemon</b>, 
<b>oDebugLevel</b>, 
<b>oExternalInterface</b>, 
<br>
&nbsp;&nbsp;<b>oGatewayID</b>, 
<b>oGatewayInterface</b>, 
<b>oGatewayAddress</b>, 
<b>oGatewayPort</b>, 
<br>
&nbsp;&nbsp;<b>oAuthServer</b>, 
<b>oAuthServHostname</b>, 
<b>oAuthServSSLAvailable</b>, 
<b>oAuthServSSLPort</b>, 
<br>
&nbsp;&nbsp;<b>oAuthServHTTPPort</b>, 
<b>oAuthServPath</b>, 
<b>oAuthServLoginScriptPathFragment</b>, 
<b>oAuthServPortalScriptPathFragment</b>, 
<br>
&nbsp;&nbsp;<b>oAuthServMsgScriptPathFragment</b>, 
<b>oAuthServPingScriptPathFragment</b>, 
<b>oAuthServAuthScriptPathFragment</b>, 
<b>oHTTPDMaxConn</b>, 
<br>
&nbsp;&nbsp;<b>oHTTPDName</b>, 
<b>oHTTPDRealm</b>, 
<b>oHTTPDUsername</b>, 
<b>oHTTPDPassword</b>, 
<br>
&nbsp;&nbsp;<b>oClientTimeout</b>, 
<b>oCheckInterval</b>, 
<b>oWdctlSocket</b>, 
<b>oSyslogFacility</b>, 
<br>
&nbsp;&nbsp;<b>oFirewallRule</b>, 
<b>oFirewallRuleSet</b>, 
<b>oTrustedMACList</b>, 
<b>oHtmlMessageFile</b>
<br>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a8666c914d96b286c9efe27de4268003"></a><!-- doxytag: member="conf.c::config_notnull" ref="a8666c914d96b286c9efe27de4268003" args="(const void *parm, const char *parmname)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><b>config_notnull</b> (const void *parm, const char *parmname)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="19f5257e157a21ebe192c121aa8b44fd"></a><!-- doxytag: member="conf.c::parse_boolean_value" ref="19f5257e157a21ebe192c121aa8b44fd" args="(char *)" -->
static int&nbsp;</td><td class="memItemRight" valign="bottom"><b>parse_boolean_value</b> (char *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ec9c053484cb6677e992d3c1511eeb51"></a><!-- doxytag: member="conf.c::parse_auth_server" ref="ec9c053484cb6677e992d3c1511eeb51" args="(FILE *, const char *, int *)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><b>parse_auth_server</b> (FILE *, const char *, int *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="conf_8c.html#c10ca895b5a20b458c1599f8a9766f4d">_parse_firewall_rule</a> (const char *ruleset, char *leftover)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0448e8e7c5a3c78addbd7f855e2dbecf"></a><!-- doxytag: member="conf.c::parse_firewall_ruleset" ref="0448e8e7c5a3c78addbd7f855e2dbecf" args="(const char *, FILE *, const char *, int *)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><b>parse_firewall_ruleset</b> (const char *, FILE *, const char *, int *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5190981355166bf58be20ad91d979ebd"></a><!-- doxytag: member="conf.c::config_parse_token" ref="5190981355166bf58be20ad91d979ebd" args="(const char *cp, const char *filename, int linenum)" -->
static OpCodes&nbsp;</td><td class="memItemRight" valign="bottom"><b>config_parse_token</b> (const char *cp, const char *filename, int linenum)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structs__config.html">s_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="conf_8c.html#64e73012596dd6628c18742c8046069f">config_get_config</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current gateway configuration.  <a href="#64e73012596dd6628c18742c8046069f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="conf_8c.html#068a358868c409bbd99d7eef3c988866">config_init</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialise the conf system.  <a href="#068a358868c409bbd99d7eef3c988866"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="conf_8c.html#17b6b425f18de3865e44b534c1f1f1cc">config_init_override</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the variables we override with the command line.  <a href="#17b6b425f18de3865e44b534c1f1f1cc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct__firewall__rule__t.html">t_firewall_rule</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="conf_8c.html#617ad9199f2b10b95498f4f15c67c66d">get_ruleset</a> (const char *ruleset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fetch a firewall rule set.  <a href="#617ad9199f2b10b95498f4f15c67c66d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="conf_8c.html#d3faac0efa0ac4c1032c0c54f7e93711">config_read</a> (const char *filename)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads the configuration file.  <a href="#d3faac0efa0ac4c1032c0c54f7e93711"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f692869bbba0cdc3c04480a40af3395e"></a><!-- doxytag: member="conf.c::parse_trusted_mac_list" ref="f692869bbba0cdc3c04480a40af3395e" args="(char *ptr)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>parse_trusted_mac_list</b> (char *ptr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="conf_8c.html#0f9540b3f729ba3b3d31b613d3eca364">config_validate</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check that the configuration is valid.  <a href="#0f9540b3f729ba3b3d31b613d3eca364"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct__auth__serv__t.html">t_auth_serv</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="conf_8c.html#82ffcd3c683aadc31aca9c53a2d2739a">get_auth_server</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the active auth server.  <a href="#82ffcd3c683aadc31aca9c53a2d2739a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="conf_8c.html#d1e677696fcef826740ca906587af8ac">mark_auth_server_bad</a> (<a class="el" href="struct__auth__serv__t.html">t_auth_serv</a> *bad_server)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bump server to bottom of the list.  <a href="#d1e677696fcef826740ca906587af8ac"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ade5b00daf915be32d7f6cbf116cd9e6"></a><!-- doxytag: member="conf.c::config" ref="ade5b00daf915be32d7f6cbf116cd9e6" args="" -->
static <a class="el" href="structs__config.html">s_config</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>config</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="conf_8c.html#b374ff230d9977e6b952612d61689f39">config_mutex</a> = PTHREAD_MUTEX_INITIALIZER</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7c1094749f55aab015c5c408def95216"></a><!-- doxytag: member="conf.c::missing_parms" ref="7c1094749f55aab015c5c408def95216" args="" -->
static int&nbsp;</td><td class="memItemRight" valign="bottom"><b>missing_parms</b></td></tr>

<tr><td class="memItemLeft" nowrap><a class="anchor" name="c4c300aeb846c6b85325f91e89268af1"></a><!-- doxytag: member="conf.c::keywords" ref="c4c300aeb846c6b85325f91e89268af1" args="[]" -->
struct {</td></tr>

<tr><td class="memItemLeft" nowrap>&nbsp;&nbsp;&nbsp;const char *&nbsp;&nbsp;&nbsp;<b>name</b></td></tr>

<tr><td class="memItemLeft" nowrap>&nbsp;&nbsp;&nbsp;OpCodes&nbsp;&nbsp;&nbsp;<b>opcode</b></td></tr>

<tr><td class="memItemLeft" nowrap valign="top">}&nbsp;</td><td class="memItemRight" valign="bottom"><b>keywords</b> []</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Config file parsing. 
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Copyright (C) 2004 Philippe April &lt;<a href="mailto:papril777@yahoo.com">papril777@yahoo.com</a>&gt; <p>
Copyright (C) 2007 Benoit Grégoire, Technologies Coeus inc. </dd></dl>

<p>Definition in file <a class="el" href="conf_8c-source.html">conf.c</a>.</p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="9934c7def687e5ed242049cb2a46eb73"></a><!-- doxytag: member="conf.c::TO_NEXT_WORD" ref="9934c7def687e5ed242049cb2a46eb73" args="(s, e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TO_NEXT_WORD          </td>
          <td>(</td>
          <td class="paramtype">s,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">e&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        <span class="keywordflow">while</span> (*s != <span class="charliteral">'\0'</span> &amp;&amp; !isblank(*s)) { \
                s++; \
        } \
        <span class="keywordflow">if</span> (*s != <span class="charliteral">'\0'</span>) { \
                *s = <span class="charliteral">'\0'</span>; \
                s++; \
                <span class="keywordflow">while</span> (isblank(*s)) \
                        s++; \
        } <span class="keywordflow">else</span> { \
                e = 1; \
        } \
} <span class="keywordflow">while</span> (0)
</pre></div>Advance to the next word <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>string to parse, this is the next_word pointer, the value of s when the macro is called is the current word, after the macro completes, s contains the beginning of the NEXT word, so you need to save s to something else before doing TO_NEXT_WORD </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>e</em>&nbsp;</td><td>should be 0 when calling <a class="el" href="conf_8c.html#9934c7def687e5ed242049cb2a46eb73">TO_NEXT_WORD()</a>, it'll be changed to 1 if the end of the string is reached. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="conf_8c-source.html#l00384">384</a> of file <a class="el" href="conf_8c-source.html">conf.c</a>.</p>

<p>Referenced by <a class="el" href="conf_8c-source.html#l00479">_parse_firewall_rule()</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="c10ca895b5a20b458c1599f8a9766f4d"></a><!-- doxytag: member="conf.c::_parse_firewall_rule" ref="c10ca895b5a20b458c1599f8a9766f4d" args="(const char *ruleset, char *leftover)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int _parse_firewall_rule           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ruleset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>leftover</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
&lt; 0 == block, 1 == allow<p>
&lt; If 0, port contained non-numerics<p>
&lt; reached end of line<p>
&lt; First word<p>
&lt; port to open/block<p>
&lt; protocol to block, tcp/udp/icmp<p>
&lt; Netmask<p>
&lt; other key word 
<p>Definition at line <a class="el" href="conf_8c-source.html#l00479">479</a> of file <a class="el" href="conf_8c-source.html">conf.c</a>.</p>

<p>References <a class="el" href="debug_8h-source.html#l00033">debug</a>, <a class="el" href="conf_8h-source.html#l00107">_firewall_ruleset_t::name</a>, <a class="el" href="conf_8h-source.html#l00100">_firewall_rule_t::next</a>, <a class="el" href="conf_8h-source.html#l00109">_firewall_ruleset_t::next</a>, <a class="el" href="conf_8h-source.html#l00108">_firewall_ruleset_t::rules</a>, <a class="el" href="conf_8h-source.html#l00154">s_config::rulesets</a>, <a class="el" href="safe_8c-source.html#l00045">safe_malloc()</a>, and <a class="el" href="conf_8c-source.html#l00384">TO_NEXT_WORD</a>.</p>

</div>
</div><p>
<a class="anchor" name="64e73012596dd6628c18742c8046069f"></a><!-- doxytag: member="conf.c::config_get_config" ref="64e73012596dd6628c18742c8046069f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structs__config.html">s_config</a>* config_get_config           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the current gateway configuration. 
<p>
Accessor for the current gateway configuration <dl class="return" compact><dt><b>Returns:</b></dt><dd>: A pointer to the current config. The pointer isn't opaque, but should be treated as READ-ONLY </dd></dl>

<p>Definition at line <a class="el" href="conf_8c-source.html#l00152">152</a> of file <a class="el" href="conf_8c-source.html">conf.c</a>.</p>

<p>Referenced by <a class="el" href="centralserver_8c-source.html#l00207">_connect_auth_server()</a>, <a class="el" href="centralserver_8c-source.html#l00065">auth_server_request()</a>, <a class="el" href="auth_8c-source.html#l00094">authenticate_client()</a>, <a class="el" href="firewall_8c-source.html#l00224">fw_sync_with_authserver()</a>, <a class="el" href="http_8c-source.html#l00064">http_callback_404()</a>, <a class="el" href="http_8c-source.html#l00222">http_callback_auth()</a>, <a class="el" href="http_8c-source.html#l00138">http_callback_status()</a>, <a class="el" href="fw__iptables_8c-source.html#l00220">iptables_fw_init()</a>, <a class="el" href="fw__iptables_8c-source.html#l00201">iptables_fw_set_authservers()</a>, <a class="el" href="commandline_8c-source.html#l00077">parse_commandline()</a>, <a class="el" href="ping__thread_8c-source.html#l00094">ping()</a>, <a class="el" href="http_8c-source.html#l00289">send_http_page()</a>, <a class="el" href="auth_8c-source.html#l00063">thread_client_timeout_check()</a>, and <a class="el" href="ping__thread_8c-source.html#l00064">thread_ping()</a>.</p>

</div>
</div><p>
<a class="anchor" name="068a358868c409bbd99d7eef3c988866"></a><!-- doxytag: member="conf.c::config_init" ref="068a358868c409bbd99d7eef3c988866" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void config_init           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialise the conf system. 
<p>
Sets the default config parameters and initialises the configuration system 
<p>Definition at line <a class="el" href="conf_8c-source.html#l00159">159</a> of file <a class="el" href="conf_8c-source.html">conf.c</a>.</p>

<p>References <a class="el" href="conf_8h-source.html#l00139">s_config::auth_servers</a>, <a class="el" href="conf_8h-source.html#l00149">s_config::checkinterval</a>, <a class="el" href="conf_8h-source.html#l00147">s_config::clienttimeout</a>, <a class="el" href="conf_8h-source.html#l00124">s_config::configfile</a>, <a class="el" href="conf_8h-source.html#l00128">s_config::daemon</a>, <a class="el" href="debug_8h-source.html#l00033">debug</a>, <a class="el" href="conf_8h-source.html#l00129">s_config::debuglevel</a>, <a class="el" href="conf_8h-source.html#l00054">DEFAULT_CHECKINTERVAL</a>, <a class="el" href="conf_8h-source.html#l00053">DEFAULT_CLIENTTIMEOUT</a>, <a class="el" href="conf_8h-source.html#l00041">DEFAULT_CONFIGFILE</a>, <a class="el" href="conf_8h-source.html#l00048">DEFAULT_DEBUGLEVEL</a>, <a class="el" href="conf_8h-source.html#l00050">DEFAULT_GATEWAYID</a>, <a class="el" href="conf_8h-source.html#l00051">DEFAULT_GATEWAYPORT</a>, <a class="el" href="conf_8h-source.html#l00042">DEFAULT_HTMLMSGFILE</a>, <a class="el" href="conf_8h-source.html#l00049">DEFAULT_HTTPDMAXCONN</a>, <a class="el" href="conf_8h-source.html#l00052">DEFAULT_HTTPDNAME</a>, <a class="el" href="conf_8h-source.html#l00058">DEFAULT_INTERNAL_SOCK</a>, <a class="el" href="conf_8h-source.html#l00055">DEFAULT_LOG_SYSLOG</a>, <a class="el" href="conf_8h-source.html#l00056">DEFAULT_SYSLOG_FACILITY</a>, <a class="el" href="conf_8h-source.html#l00057">DEFAULT_WDCTL_SOCK</a>, <a class="el" href="conf_8h-source.html#l00130">s_config::external_interface</a>, <a class="el" href="conf_8h-source.html#l00135">s_config::gw_address</a>, <a class="el" href="conf_8h-source.html#l00132">s_config::gw_id</a>, <a class="el" href="conf_8h-source.html#l00134">s_config::gw_interface</a>, <a class="el" href="conf_8h-source.html#l00137">s_config::gw_port</a>, <a class="el" href="conf_8h-source.html#l00125">s_config::htmlmsgfile</a>, <a class="el" href="conf_8h-source.html#l00142">s_config::httpdmaxconn</a>, <a class="el" href="conf_8h-source.html#l00140">s_config::httpdname</a>, <a class="el" href="conf_8h-source.html#l00146">s_config::httpdpassword</a>, <a class="el" href="conf_8h-source.html#l00144">s_config::httpdrealm</a>, <a class="el" href="conf_8h-source.html#l00145">s_config::httpdusername</a>, <a class="el" href="conf_8h-source.html#l00127">s_config::internal_sock</a>, <a class="el" href="conf_8h-source.html#l00151">s_config::log_syslog</a>, <a class="el" href="conf_8h-source.html#l00154">s_config::rulesets</a>, <a class="el" href="conf_8h-source.html#l00152">s_config::syslog_facility</a>, <a class="el" href="conf_8h-source.html#l00155">s_config::trustedmaclist</a>, and <a class="el" href="conf_8h-source.html#l00126">s_config::wdctl_sock</a>.</p>

</div>
</div><p>
<a class="anchor" name="17b6b425f18de3865e44b534c1f1f1cc"></a><!-- doxytag: member="conf.c::config_init_override" ref="17b6b425f18de3865e44b534c1f1f1cc" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void config_init_override           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the variables we override with the command line. 
<p>
If the command-line didn't provide a config, use the default. 
<p>Definition at line <a class="el" href="conf_8c-source.html#l00191">191</a> of file <a class="el" href="conf_8c-source.html">conf.c</a>.</p>

<p>References <a class="el" href="conf_8h-source.html#l00128">s_config::daemon</a>, and <a class="el" href="conf_8h-source.html#l00047">DEFAULT_DAEMON</a>.</p>

</div>
</div><p>
<a class="anchor" name="d3faac0efa0ac4c1032c0c54f7e93711"></a><!-- doxytag: member="conf.c::config_read" ref="d3faac0efa0ac4c1032c0c54f7e93711" args="(const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void config_read           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reads the configuration file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>Full path of the configuration file to be read </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="conf_8c-source.html#l00632">632</a> of file <a class="el" href="conf_8c-source.html">conf.c</a>.</p>

<p>References <a class="el" href="conf_8h-source.html#l00149">s_config::checkinterval</a>, <a class="el" href="conf_8h-source.html#l00147">s_config::clienttimeout</a>, <a class="el" href="conf_8h-source.html#l00128">s_config::daemon</a>, <a class="el" href="debug_8h-source.html#l00033">debug</a>, <a class="el" href="conf_8h-source.html#l00130">s_config::external_interface</a>, <a class="el" href="conf_8h-source.html#l00135">s_config::gw_address</a>, <a class="el" href="conf_8h-source.html#l00132">s_config::gw_id</a>, <a class="el" href="conf_8h-source.html#l00134">s_config::gw_interface</a>, <a class="el" href="conf_8h-source.html#l00137">s_config::gw_port</a>, <a class="el" href="conf_8h-source.html#l00125">s_config::htmlmsgfile</a>, <a class="el" href="conf_8h-source.html#l00142">s_config::httpdmaxconn</a>, <a class="el" href="conf_8h-source.html#l00140">s_config::httpdname</a>, <a class="el" href="conf_8h-source.html#l00146">s_config::httpdpassword</a>, <a class="el" href="conf_8h-source.html#l00144">s_config::httpdrealm</a>, <a class="el" href="conf_8h-source.html#l00145">s_config::httpdusername</a>, <a class="el" href="common_8h-source.html#l00031">MAX_BUF</a>, <a class="el" href="conf_8h-source.html#l00152">s_config::syslog_facility</a>, and <a class="el" href="conf_8h-source.html#l00126">s_config::wdctl_sock</a>.</p>

</div>
</div><p>
<a class="anchor" name="0f9540b3f729ba3b3d31b613d3eca364"></a><!-- doxytag: member="conf.c::config_validate" ref="0f9540b3f729ba3b3d31b613d3eca364" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void config_validate           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check that the configuration is valid. 
<p>
Verifies if the configuration is complete and valid. Terminates the program if it isn't 
<p>Definition at line <a class="el" href="conf_8c-source.html#l00828">828</a> of file <a class="el" href="conf_8c-source.html">conf.c</a>.</p>

<p>References <a class="el" href="conf_8h-source.html#l00139">s_config::auth_servers</a>, <a class="el" href="debug_8h-source.html#l00033">debug</a>, and <a class="el" href="conf_8h-source.html#l00134">s_config::gw_interface</a>.</p>

</div>
</div><p>
<a class="anchor" name="82ffcd3c683aadc31aca9c53a2d2739a"></a><!-- doxytag: member="conf.c::get_auth_server" ref="82ffcd3c683aadc31aca9c53a2d2739a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__auth__serv__t.html">t_auth_serv</a>* get_auth_server           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the active auth server. 
<p>
This function returns the current (first auth_server) 
<p>Definition at line <a class="el" href="conf_8c-source.html#l00855">855</a> of file <a class="el" href="conf_8c-source.html">conf.c</a>.</p>

<p>References <a class="el" href="conf_8h-source.html#l00139">s_config::auth_servers</a>.</p>

<p>Referenced by <a class="el" href="centralserver_8c-source.html#l00065">auth_server_request()</a>, <a class="el" href="auth_8c-source.html#l00094">authenticate_client()</a>, <a class="el" href="http_8c-source.html#l00064">http_callback_404()</a>, <a class="el" href="http_8c-source.html#l00222">http_callback_auth()</a>, <a class="el" href="http_8c-source.html#l00162">http_send_redirect_to_auth()</a>, and <a class="el" href="ping__thread_8c-source.html#l00094">ping()</a>.</p>

</div>
</div><p>
<a class="anchor" name="617ad9199f2b10b95498f4f15c67c66d"></a><!-- doxytag: member="conf.c::get_ruleset" ref="617ad9199f2b10b95498f4f15c67c66d" args="(const char *ruleset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__firewall__rule__t.html">t_firewall_rule</a>* get_ruleset           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ruleset</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Fetch a firewall rule set. 
<p>

<p>Definition at line <a class="el" href="conf_8c-source.html#l00615">615</a> of file <a class="el" href="conf_8c-source.html">conf.c</a>.</p>

<p>References <a class="el" href="conf_8h-source.html#l00107">_firewall_ruleset_t::name</a>, <a class="el" href="conf_8h-source.html#l00109">_firewall_ruleset_t::next</a>, <a class="el" href="conf_8h-source.html#l00108">_firewall_ruleset_t::rules</a>, and <a class="el" href="conf_8h-source.html#l00154">s_config::rulesets</a>.</p>

</div>
</div><p>
<a class="anchor" name="d1e677696fcef826740ca906587af8ac"></a><!-- doxytag: member="conf.c::mark_auth_server_bad" ref="d1e677696fcef826740ca906587af8ac" args="(t_auth_serv *bad_server)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mark_auth_server_bad           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__auth__serv__t.html">t_auth_serv</a> *&nbsp;</td>
          <td class="paramname"> <em>bad_server</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Bump server to bottom of the list. 
<p>
This function marks the current auth_server, if it matches the argument, as bad. Basically, the "bad" server becomes the last one on the list. 
<p>Definition at line <a class="el" href="conf_8c-source.html#l00867">867</a> of file <a class="el" href="conf_8c-source.html">conf.c</a>.</p>

<p>References <a class="el" href="conf_8h-source.html#l00139">s_config::auth_servers</a>, and <a class="el" href="conf_8h-source.html#l00089">_auth_serv_t::next</a>.</p>

<p>Referenced by <a class="el" href="centralserver_8c-source.html#l00207">_connect_auth_server()</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="b374ff230d9977e6b952612d61689f39"></a><!-- doxytag: member="conf.c::config_mutex" ref="b374ff230d9977e6b952612d61689f39" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="wdctl__thread_8c.html#b374ff230d9977e6b952612d61689f39">config_mutex</a> = PTHREAD_MUTEX_INITIALIZER          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mutex for the configuration file, used by the auth_servers related functions. 
<p>Definition at line <a class="el" href="conf_8c-source.html#l00056">56</a> of file <a class="el" href="conf_8c-source.html">conf.c</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Sep 25 15:28:43 2009 for WifiDog by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
